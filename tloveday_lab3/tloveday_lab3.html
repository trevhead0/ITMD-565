<!DOCTYPE html>
<html lang="en" id="menupage">
<head>
    <title>Lab 1 565</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,shrink-to-fit=no" />
    <link rel="stylesheet" href="assets/css/screen.css" />
    <link href="https://fonts.googleapis.com/css?family=Grand+Hotel|Inconsolata|Indie+Flower&display=swap" rel="stylesheet">
</head>

<body>
    <header>
        <h3 id="funName">
            ITMD 565 Lab 3- Trevor Loveday - tloveday@hawk.iit.edu
        </h3>
        <h1>
            Sales Tax Calculator
        </h1>
    </header>
    <main id="content">
        <p id="description">
            Enter Subtotal and Tax Rate and click the Calculate button to show the sales tax amount and the total. Click the clear button to clear out all form fields. Tax rate should be a percentage but do not enter a % sign in the tax rate box.
        </p>
        <!--Form Submission-->
        <ul id="form">
            <li>
                <!--Subtotal-->
                <label for="subTotal">
                    Subtotal
                </label>
                <input type="number" step=".01" id="subTotal" class="label" min="0" />
            </li>
            <li>
              <p id="subWarn" class="nv warning"> Please enter a valid number greater than 0</p>
            </li>
            <li>
                <!--Tax Rate-->
                <label for="taxRate">
                    Tax Rate
                </label>
                <input type="number" step=".01" id="taxRate" class="label" min="0" />
            </li>
            <li>
              <p id="taxWarn1" class="nv warning"> Please enter a valid tax number greater than 0</p>
              <p id="taxWarn2" class="nv warning"> Please enter a valid tax number less than or equal to 20</p>
            </li>
            <li>
                <!--Sales Tax(should be disabled for user)-->
                <label for="salesTax">
                    Sales Tax
                </label>
                <input disabled type="number" step=".01" id="salesTax" class="label" min="0" />
            </li>
            <li>
                <!--Total (Should be disabled for user-->
                <label for="total">
                    Total
                </label>
                <input disabled type="number" step=".01" id="total" class="label" min="0" />
            </li>
        </ul>
        <ul id="buttons">
            <li id="calculate" class="button">
                <a id="calcBut" href="#" onclick="return false" class="button">Calculate Tax and Total</a>
            </li>
            <li id="clearbut" class="button">
                <a id="clearBut" href="#" onclick="return false" class="button">Clear</a>
            </li>
        </ul>
    </main>
    <footer>
        <figure>
            <img id="logo" src="./assets/images/money.jpg" alt="Money!" />
            <figcaption class="nv">
                Money
            </figcaption>
        </figure>
        <p id="bot"><small>@2020 Trevor Loveday | tloveday@hawk.iit.edu</small></p>
    </footer>
    <!--<script src="assets/js/site.js"></script>-->
    <script>
      // Da Dom offers you a favor you cant refuse
      window.addEventListener('DOMContentLoaded', function () {
        console.log("All Loaded and ready to go!");
        var subText = document.getElementById("subTotal");
        var taxText = document.getElementById("taxRate");
        var salesText = document.getElementById("salesTax");
        var totalText = document.getElementById("total");


        document.querySelector("#calcBut").addEventListener('click', function () {
          //print
          var x = document.getElementsByClassName("warning");
          for (var i=0;i<x.length;i++){
            if(x[i].classList.contains("nv") !== true){
              x[i].classList.toggle("nv");
              console.log(x[i]);
            }
          }
          //Get numbers to calculate
          var sub = parseFloat(subText.value);

          var rate = parseFloat(taxText.value);
          if (sub > 0 && rate > 0 && rate <= 20) {
              //Do Maths
                  console.log("Worked");
              var salesT = (rate / 100) * sub;
              var totalC = salesT + sub;

              //Set Elements
              salesText.value = salesT.toFixed(2);
              totalText.value = totalC.toFixed(2);
          }
          else {
            if (sub > 0) {
              if(rate <= 0 || Number.isNaN(rate)){
                console.log("Tax warning");
                document.getElementById("taxWarn1").classList.toggle("nv");
              }
              if (rate >20 || Number.isNaN(rate)){
                console.log("Tax2 warning");
                document.getElementById("taxWarn2").classList.toggle("nv");
              }
            }
            else if (rate > 0 && rate <= 20) {
                console.log("Sub warning");
              document.getElementById("subWarn").classList.toggle("nv");
            }
            else{
                console.log("ALL warning");
              document.getElementById("subWarn").classList.toggle("nv");
              document.getElementById("taxWarn2").classList.toggle("nv");
              document.getElementById("taxWarn1").classList.toggle("nv");
                  }
          }
        });

        document.querySelector("#clearBut").addEventListener('click', function () {
          console.log('Something Happened Again!');
          subText.value = "";
          subText.focus();
          taxText.value = "";
          salesText.value = "";
          totalText.value = "";
        });
      });

    </script>
</body>
</html>
